(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{249:function(e,t,n){},250:function(e,t,n){},256:function(e,t){},257:function(e,t){},265:function(e,t){},266:function(e,t,n){},268:function(e,t,n){},269:function(e,t,n){},270:function(e,t,n){},271:function(e,t,n){},272:function(e,t,n){},273:function(e,t,n){},275:function(e,t,n){"use strict";n.r(t);var c=n(19),a=n.n(c),r=n(209),s=n.n(r),i=(n(249),n(6)),o=(n(250),n(103)),u=n(13),l=40,f=n(9),j=n.n(f),b=n(12),d=n(144),p=(n(274),n(266),n(14)),O={modelType:d.c.modelType.SINGLEPOSE_LIGHTNING,enableTracking:!0},m={audio:!1,video:{width:400,height:400,facingMode:"user",frameRate:{ideal:60}}},h={flipHorizontal:!0},v=function(e){var t=e.onAiValueChange,n=e.isCameraEnabled,a=Object(c.useState)(null),r=Object(i.a)(a,2),s=r[0],o=r[1],u=Object(c.useState)(null),l=Object(i.a)(u,2),f=l[0],v=l[1],x=Object(c.useState)(null),k=Object(i.a)(x,2),g=k[0],w=k[1],E=Object(c.useState)(!1),N=Object(i.a)(E,2),y=N[0],I=N[1],S=function(e){var t=Math.floor(-.3*-e-100);return t>0?0:t};return Object(c.useEffect)((function(){if(s&&f){s.srcObject=f,I(!1);var e=function(){var e=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.play();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return e(),I(!0),function(){s.srcObject=null}}}),[f,s]),Object(c.useEffect)((function(){if(s&&g&&y){var e=function(){var e=Object(b.a)(j.a.mark((function e(){var n,c,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.estimatePoses(s,h);case 2:c=e.sent,(a=null===(n=c[0])||void 0===n?void 0:n.keypoints[6])&&t(S(a.y));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n=setInterval((function(){4===s.readyState&&e()}),80);return function(){return clearInterval(n)}}}),[s,g,y,t]),Object(c.useEffect)((function(){if(n){var e=function(){var e=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=v,e.next=3,navigator.mediaDevices.getUserMedia(m);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=w,e.next=3,d.b(d.a.MoveNet,O);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),t()}else v(null)}),[n]),Object(c.useEffect)((function(){if(f)return function(){return f.getTracks().forEach((function(e){return e.stop()}))}}),[f]),Object(c.useEffect)((function(){if(g)return function(){g.dispose()}}),[g]),Object(p.jsx)("div",{className:"webcam-wrapper",children:n&&Object(p.jsx)("video",{ref:o})})},x=(n(268),n(269),function(e){var t=e.height,n=function(e){return"".concat(e,"%")},c={left:n(e.x),height:n(t)};return Object(p.jsx)("div",{className:"obstacle-wrapper",style:c})}),k=function(e){return!!e&&Boolean(e.count)},g=function(e){return!!e&&Boolean(e.id)},w=(n(270),function(e){var t=e.pokemonUrl,n=e.playerCoord,a=Object(c.useState)(""),r=Object(i.a)(a,2),s=r[0],o=r[1];Object(c.useEffect)((function(){function e(){return(e=Object(b.a)(j.a.mark((function e(){var n,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch(t);case 4:return n=e.sent,e.next=7,n.json();case 7:c=e.sent,g(c)&&o(c.sprites.other.dream_world.front_default);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t]);var u,l={top:(u=n,"".concat(u+100,"%"))};return Object(p.jsxs)("div",{className:"player-wrapper",style:l,children:[Object(p.jsx)("img",{className:"pokemon",src:s}),Object(p.jsx)("img",{className:"skate",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAMCAYAAACeGbYxAAAAk0lEQVR4nL2TsRHCMAxFn3K+w11aL8UYjEGVkbxU2nSiEkWMg30JBUSosaz/pafCBgCi8ZeonGgZzB+8ccKrlFGujuCM1jwAzEDqBI+Yyzn0BW9gA/UE93PDu5CcwankA6jciLsbnQkEWDkqsknRJseHdC9AAGklz7+qlSXHpmjjeKm3ZXk0jd97P0LXYXub/up9AsUJMQbaFcO1AAAAAElFTkSuQmCC"})]})}),E=1,N=function(e){var t=e.pokemonPlayer,n=Object(c.useState)(0),a=Object(i.a)(n,2),r=a[0],s=a[1],f=Object(c.useState)([]),j=Object(i.a)(f,2),b=j[0],d=j[1],O=Object(c.useState)(!1),m=Object(i.a)(O,2),h=m[0],k=m[1],g=Object(c.useState)(0),N=Object(i.a)(g,2),y=N[0],I=N[1],S=Object(c.useState)(!1),A=Object(i.a)(S,2),C=A[0],P=A[1],M=Object(c.useState)(!0),L=Object(i.a)(M,2),B=L[0],U=L[1],F=function(e){var t=e.onChangePlayerCoord,n=e.isPaused,a=Object(c.useRef)(0),r=Object(c.useState)({}),s=Object(i.a)(r,2),o=s[0],u=s[1];return Object(c.useEffect)((function(){var e=null,c=null,r=Math.PI/60;if(!n){var s=function(){if(a.current>Math.PI&&null!==c)return a.current=0,clearInterval(c),e=null,void(c=null);if(a.current<Math.PI/2){var n=Math.PI/2-a.current;a.current+=2*n}var s=Math.abs(Math.sin(a.current));t(Math.floor(-100*s)),a.current+=r};return!n&&a.current>0&&(c=setInterval(s,l)),u({handleJump:function(t){t instanceof KeyboardEvent&&" "!==t.key||c||(c=setInterval(s,20),s(),e&&clearInterval(e))},handleBack:function(n){if(!(n instanceof KeyboardEvent&&" "!==n.key)&&!e){var s=function(){if(a.current>Math.PI&&null!==e)return clearInterval(e),e=null,a.current=0,c&&clearInterval(c),void(c=null);var n=Math.abs(Math.sin(a.current));t(Math.floor(-100*n)),a.current+=r};e=setInterval(s,20),s()}}}),function(){e&&clearInterval(e),c&&clearInterval(c)}}}),[t,n]),o}({onChangePlayerCoord:s,isPaused:C}),R=F.handleBack,T=F.handleJump;Object(c.useEffect)((function(){var e=setInterval((function(){if(h&&!(50*Math.random()+50>100)){var e={height:-40*Math.random()+60,x:100,y:-50*Math.random()+50,id:E++};d((function(t){return[].concat(Object(u.a)(t),[e])}))}}),3200);return function(){clearInterval(e)}}),[h]),Object(c.useEffect)((function(){if(h&&!C&&!B){var e=null,t=null;if(T&&R)return e=setInterval((function(){document.addEventListener("keyup",T),document.addEventListener("touchend",T)}),l),t=setInterval((function(){document.addEventListener("keydown",R),document.addEventListener("touchstart",R)}),l),function(){t&&clearInterval(t),e&&clearInterval(e),t=null,e=null,document.removeEventListener("keydown",R),document.removeEventListener("touchstart",T),document.removeEventListener("touchend",T),document.removeEventListener("keyup",T)}}}),[T,R,C,h,B]);var G=Object(c.useCallback)((function(e){T&&R&&h&&!C&&(e>=-3?T():R())}),[R,T,h,C]);return Object(c.useEffect)((function(){if(!C){if(h){var e=setInterval((function(){d((function(e){return e.map((function(e){return Object(o.a)(Object(o.a)({},e),{},{x:e.x-1})})).filter((function(e){return 0!==e.x}))}))}),20);return function(){clearInterval(e)}}d([])}}),[h,C]),Object(c.useEffect)((function(){b.forEach((function(e){e.x<=11&&-r<=e.height&&setTimeout((function(){s(0),I(0),k(!1)}),l)}))}),[b,r]),Object(c.useEffect)((function(){if(!C&&h){var e=setInterval((function(){I((function(e){return e+1}))}),800);return function(){clearInterval(e)}}}),[C,h]),Object(p.jsxs)("div",{className:"main-game-wrapper",children:[Object(p.jsxs)("div",{className:"game-wrapper",children:[Object(p.jsxs)("span",{className:"game-logo",children:["RUN! ",null===t||void 0===t?void 0:t.name,"! RUN!"]}),Object(p.jsxs)("div",{className:"game-block-container",children:[Object(p.jsx)("div",{className:h?C?"game-block":"game-block animated":"game-block",children:Object(p.jsxs)("div",{className:"game-field",children:[Object(p.jsx)(w,{pokemonUrl:null===t||void 0===t?void 0:t.url,playerCoord:r}),b.map((function(e,t){return Object(c.createElement)(x,Object(o.a)(Object(o.a)({},e),{},{key:t}))}))]})}),h&&Object(p.jsx)("div",{className:"btn-pause-wrapper",children:Object(p.jsx)("button",{className:"btn-pause",onClick:function(){h&&P((function(e){return!e}))},children:"PAUSE"})})]}),Object(p.jsxs)("div",{className:"webcam-wrapper ".concat(B?"":"disabled"),children:[B&&Object(p.jsx)(v,{isPaused:C,onAiValueChange:G,isCameraEnabled:B}),Object(p.jsx)("div",{className:"features-wrapper",children:Object(p.jsxs)("span",{className:"checkbox-wrapper",children:[B?"Camera ON":"Camera OFF",Object(p.jsx)("input",{type:"checkbox",onChange:function(){return U(!B)},checked:B,className:"checkboxOnOff"})]})})]})]}),Object(p.jsxs)("div",{className:"game-score",children:[Object(p.jsx)("span",{children:"SCORE"}),Object(p.jsx)("span",{children:y})]}),Object(p.jsxs)("div",{className:"instructions-wrapper",children:[Object(p.jsxs)("span",{children:["If you switch the camera ON then controlling ",Object(p.jsx)("span",{className:"sub-instruction",children:"will be using the AI."})]}),Object(p.jsxs)("span",{children:["If you switch the camera OFF then controlling"," ",Object(p.jsx)("span",{className:"sub-instruction",children:"will be using the SPACEBAR"})]})]}),!h&&Object(p.jsx)("div",{className:"btn-start-wrapper",children:Object(p.jsx)("button",{className:"btn-start",onClick:function(){return k(!0)},children:"Start"})})]})};n(271);var y=n.p+"static/media/three-dots.b98a8c76.svg";function I(){return Object(p.jsx)("div",{className:"loader-wrapper",children:Object(p.jsx)("img",{className:"loader",src:y,alt:""})})}n(272);function S(e){var t=e.pokemonItem,n=e.onClick,a=e.isPokemonSelected,r=Object(c.useState)({weight:0,baseExperience:0,height:0}),s=Object(i.a)(r,2),o=s[0],u=s[1],l=Object(c.useState)(!1),f=Object(i.a)(l,2),d=f[0],O=f[1],m=Object(c.useState)(""),h=Object(i.a)(m,2),v=h[0],x=h[1];return Object(c.useEffect)((function(){function e(){return(e=Object(b.a)(j.a.mark((function e(){var n,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t.url);case 2:return n=e.sent,e.next=5,n.json();case 5:c=e.sent,g(c)&&(u({weight:c.weight,baseExperience:c.base_experience,height:c.height}),x(c.sprites.other.dream_world.front_default),O(!1));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}O(!0),function(){e.apply(this,arguments)}()}),[null===t||void 0===t?void 0:t.url]),Object(p.jsx)("div",{className:a?"pokemon-card active":"pokemon-card",onClick:n,children:d?Object(p.jsx)(I,{}):Object(p.jsxs)("div",{className:"pokemon-header-wrapper",children:[Object(p.jsx)("span",{className:"pokemon-name",children:t.name}),Object(p.jsxs)("div",{className:"pokemon-common-info",children:[Object(p.jsxs)("span",{children:["Weight: ",o.weight]}),Object(p.jsxs)("span",{children:["Base experience: ",o.baseExperience]}),Object(p.jsxs)("span",{children:["Height: ",o.height]})]}),Object(p.jsx)("div",{className:"pokemon-image",children:Object(p.jsx)("img",{src:v,alt:""})})]})})}n(273);var A=function(e){var t=e.onSelectPokemon,n=e.selectedPokemons,a=Object(c.useState)([]),r=Object(i.a)(a,2),s=r[0],o=r[1],l=Object(c.useState)(0),f=Object(i.a)(l,2),d=f[0],O=f[1],m=Object(c.useState)(!0),h=Object(i.a)(m,2),v=h[0],x=h[1],g=Object(c.useState)(null),w=Object(i.a)(g,2),E=w[0],N=w[1];return Object(c.useEffect)((function(){function e(){return(e=Object(b.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://pokeapi.co/api/v2/pokemon?limit=".concat(10,"&offset=").concat(10*d));case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,k(n)&&(x(!1),o((function(e){return[].concat(Object(u.a)(e),Object(u.a)(n.results))})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[d]),function(e){var t=e.ref,n=e.onIntersect,a=e.isDisabled;Object(c.useEffect)((function(){if(!a&&t){var e=new IntersectionObserver((function(e){Object(i.a)(e,1)[0].isIntersecting&&n()}),{threshold:.5,rootMargin:"200px"});return e.observe(t),function(){e.unobserve(t)}}}),[t,n,a])}({ref:E,onIntersect:Object(c.useCallback)((function(){O((function(e){return e+1}))}),[]),isDisabled:v}),v?Object(p.jsx)(I,{}):Object(p.jsxs)("div",{className:"pokemon-wrapper",children:[Object(p.jsx)("span",{className:"pokemon-logo",children:"choose your pokemon!"}),Object(p.jsx)("div",{className:"pokemon-cards",children:s.map((function(e){var c=n.includes(e.name);return Object(p.jsx)(S,{pokemonItem:e,isPokemonSelected:c,onClick:function(){return t(e,c)}},e.name)}))}),Object(p.jsx)("div",{ref:N,className:"observer-block"})]})},C=function(){var e=Object(c.useState)(!1),t=Object(i.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(),s=Object(i.a)(r,2),o=s[0],u=s[1];return Object(p.jsx)("div",{className:"main-wrapper",children:n?Object(p.jsx)(N,{pokemonPlayer:o}):Object(p.jsxs)("div",{children:[Object(p.jsx)(A,{selectedPokemons:o?[o.name]:[],onSelectPokemon:u}),o&&Object(p.jsx)("div",{className:"btn-start-wrapper",children:Object(p.jsx)("button",{className:"btn-start",onClick:function(){a(!0)},children:"Start"})})]})})},P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,277)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))};s.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(C,{})}),document.getElementById("root")),P()}},[[275,1,2]]]);
//# sourceMappingURL=main.e0267d2f.chunk.js.map